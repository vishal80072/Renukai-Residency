{"version":3,"file":"static/js/899.40943463.chunk.js","mappings":"yLAIA,IAJoB,SAAH,GAAsB,IAAhBA,EAAQ,EAARA,SACnB,OAAO,wBAAKA,GAChB,C,8KCWMC,EAAgB,CAAC,8BACnB,kCACA,+BACA,+BACA,oCACA,4BACA,kCAuJJ,UArJkB,WAEd,OAAwBC,EAAAA,EAAAA,UAAS,IAAG,eAA7BC,EAAI,KAAEC,EAAO,KACpB,GAAsDF,EAAAA,EAAAA,UAAS,IAAG,eAAtCG,GAAF,KAAwB,MAClD,GAA4CH,EAAAA,EAAAA,UAAS,IAAG,eAAjCI,GAAF,KAAmB,MAElCC,EAAe,yCAAG,WAAOC,GAAK,oFAEE,GAD5BC,EAAQD,EAAMA,EAAME,OAAS,MACrB,IAAIC,MAAOC,UACbH,GAAK,iBAGb,IAFMI,EAAO,GACTC,EAAWL,EACNM,EAAI,EAAGA,EAAId,EAAcS,OAAQK,IACtCF,EAAKG,KACD,IAAIL,KAAKM,IAAOH,GAAUI,IAAI,EAAG,MAAMN,WAE3CE,EAAWG,IAAOH,GAAUI,IAAI,EAAG,KAGkB,OAAnDC,GAAMC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,aAAc,wBAAwB,EAAD,QACnDC,EAAAA,EAAAA,IAAUH,EAAK,CACjBI,eAAgBV,IACjB,KAAD,2BAEKA,GAAI,iCAIRL,GAAK,4CACf,gBAvBoB,sCAyBfgB,EAAU,yCAAG,uGAE6C,OAAtDC,GAASL,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,aAAc,wBAAwB,EAAD,QACtCK,EAAAA,EAAAA,IAAOD,GAAQ,KAAD,EAAvB,OAAPE,EAAO,gBACOpB,EAAgBoB,EAAQxB,OAAOoB,gBAAe,OAGG,OAH/Df,EAAK,OACXF,EAAkBE,GAEZoB,GAAkBR,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,aAAc,wBAAwB,EAAD,SAC1CK,EAAAA,EAAAA,IAAOE,GAAiB,KAAD,GAA5CC,EAAY,OACZC,EAAmBD,EAAa1B,OAAO4B,mBAC7C1B,EAAuByB,GAEjBjB,EAAO,GACTmB,EAAO,EACX/B,EAAcgC,SAAQ,SAAAC,GACbJ,EAAiBK,SAASD,KAC3BrB,EAAKG,KAAK,CACNkB,OAAQA,EACRE,KAAMnB,IAAOT,EAAMwB,IAAOK,OAAO,QAAU,KAAOpB,IAAOT,EAAMwB,IAAOK,OAAO,iBAEjFL,IAER,IACAF,EAAiBG,SAAQ,SAAAC,GACrBrB,EAAKG,KAAK,CACNkB,OAAQA,EACRE,KAAMnB,IAAOT,EAAMwB,IAAOK,OAAO,QAAU,KAAOpB,IAAOT,EAAMwB,IAAOK,OAAO,iBAEjFL,GACJ,IACA5B,EAAQS,GAAK,4CAChB,kBA/Be,mCA8EhB,OAJAyB,EAAAA,EAAAA,YAAU,WACNd,GACJ,GAAG,KAEI,+BACH,UAAC,KAAK,CAACe,UAAU,OAAM,WACnB,SAAC,KAAW,CAACA,UAAU,iCAAgC,UACnD,SAAC,IAAW,UAAC,kBAKjB,SAAC,KAAS,WACN,UAAC,KAAM,CAACC,SAAO,EAACD,UAAU,SAAQ,WAC9B,SAAC,IAAU,CAACE,MAAM,OAAM,UACpB,UAAC,KAAS,YACN,SAAC,KAAgB,CAACC,MAAM,MAAK,SAAC,YAC9B,SAAC,KAAgB,CAACA,MAAM,MAAK,SAAC,eAItC,SAAC,KAAU,UACNvC,EAAKwC,KAAI,SAACC,EAAG7B,GAAC,OAAM,SAAC,EAAA8B,SAAQ,WAC1B,UAAC,KAAS,YACN,SAAC,KAAgB,CAACH,MAAM,MAAMH,UAAU,oBAAmB,SACtDK,EAAEV,UAEP,SAAC,KAAc,UACVU,EAAER,WANqBrB,EAczB,eAMnC,C","sources":["components/PageHeading.js","views/water-days/WaterDays.js"],"sourcesContent":["const PageHeading = ({ children }) => {\r\n    return <h5>{children}</h5>\r\n}\r\n\r\nexport default PageHeading","import { CCard, CCardHeader, CCardBody, CCardTitle, CCardText, CRow, CCol, CTable, CTableHead, CTableRow, CTableHeaderCell, CTableBody, CTableDataCell, CButton } from '@coreui/react'\nimport PageHeading from '../../components/PageHeading'\nimport { WhatsappIcon } from 'react-share';\nimport { useEffect } from 'react';\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { db } from 'src/firebase/FirebaseProvider';\nimport { useState } from 'react';\nimport moment from 'moment/moment';\nimport CIcon from '@coreui/icons-react';\nimport { cilUserX } from '@coreui/icons';\nimport { Fragment } from 'react';\nimport Swal from 'sweetalert2';\n\nconst listOfMembers = [\"Shree. Ranjit Ranchhod Kale\",\n    \"Shree. Vilas Vaman Talele (Sir)\",\n    \"Shree. Chandan Aananda Patil\",\n    \"Shree. Rahul Kirtikumar Jain\",\n    \"Shree. Abhijit Shyamkant Kulkarni\",\n    \"Shree. Kunal Pandit Patil\",\n    \"Shree. Abhiman Pralhad Surgade\"]\n\nconst WaterDays = () => {\n\n    const [data, setData] = useState([])\n    const [notAvailableMembers, setNotAvailableMembers] = useState([])\n    const [availableDates, setAvailableDates] = useState([])\n\n    const getUpdatedDates = async (dates) => {\n        const mili1 = dates[dates.length - 1]\n        const mili2 = new Date().getTime()\n        if (mili2 > mili1) {\n            const temp = []\n            let prevDate = mili1\n            for (var i = 0; i < listOfMembers.length; i++) {\n                temp.push(\n                    new Date(moment(prevDate).add(3, 'd')).getTime()\n                )\n                prevDate = moment(prevDate).add(3, 'd')\n            }\n\n            const ref = doc(db, \"water-days\", \"elWcmZ1gatVnwiqHJIJO\");\n            await updateDoc(ref, {\n                availableDates: temp\n            });\n            \n            return temp\n            ///// HERE update the dates array and return new array\n            \n        }\n        return dates\n    }\n\n    const updateDays = async () => {\n\n        const docRef = doc(db, \"water-days\", \"elWcmZ1gatVnwiqHJIJO\");\n        const docSnap = await getDoc(docRef);\n        const dates = await getUpdatedDates(docSnap.data().availableDates)\n        setAvailableDates(dates)\n\n        const notAvailableRef = doc(db, \"water-days\", \"5WPZ5s20pvizja89MEhE\");\n        const notAvailable = await getDoc(notAvailableRef);\n        const tempNotAvailable = notAvailable.data().memberNotAvailable\n        setNotAvailableMembers(tempNotAvailable)\n\n        const temp = []\n        let loop = 0\n        listOfMembers.forEach(member => {\n            if (!tempNotAvailable.includes(member)) {\n                temp.push({\n                    member: member,\n                    date: moment(dates[loop]).format(\"dddd\") + \", \" + moment(dates[loop]).format(\"DD MMM YYYY\")\n                })\n                loop++\n            }\n        })\n        tempNotAvailable.forEach(member => {\n            temp.push({\n                member: member,\n                date: moment(dates[loop]).format(\"dddd\") + \", \" + moment(dates[loop]).format(\"DD MMM YYYY\")\n            })\n            loop++\n        })\n        setData(temp)\n    }\n\n    const onMemberNotAvailable = async (member) => {\n        if (!notAvailableMembers.includes(member)) {\n            const temp = notAvailableMembers\n            temp.push(member)\n\n            const ref = doc(db, \"water-days\", \"5WPZ5s20pvizja89MEhE\");\n            await updateDoc(ref, {\n                memberNotAvailable: temp\n            });\n\n            Swal.fire({\n                title: \"Success\",\n                text: \"Member removed successfully!\",\n                icon: \"success\",\n                confirmButtonColor: \"#006f95\"\n            }).then(() => {\n                updateDays()\n            })\n        }\n    }\n\n    const onDateJump = async () => {\n        const dates = {}\n        availableDates.forEach((x,i) => {\n            dates[i] = x\n        })\n\n        const { value: fruit } = await Swal.fire({\n            title: 'Select field validation',\n            input: 'select',\n            inputOptions: dates,\n            inputPlaceholder: 'Select a fruit',\n            showCancelButton: true,\n            confirmButtonColor: \"#006f95\"\n          })\n          \n          if (fruit) {\n            Swal.fire(`You selected: ${fruit}`)\n          }\n    }\n\n    useEffect(() => {\n        updateDays()\n    }, [])\n\n    return <>\n        <CCard className=\"mb-4\">\n            <CCardHeader className='d-flex justify-content-between'>\n                <PageHeading>\n                    Water Days\n                </PageHeading>\n                {/* <CButton variant=\"outline\" onClick={onDateJump}>Date Jump</CButton> */}\n            </CCardHeader>\n            <CCardBody>\n                <CTable striped className='border'>\n                    <CTableHead color='dark'>\n                        <CTableRow>\n                            <CTableHeaderCell scope=\"col\">Member</CTableHeaderCell>\n                            <CTableHeaderCell scope=\"col\">Date</CTableHeaderCell>\n                            {/* <CTableHeaderCell scope=\"col\">Action</CTableHeaderCell> */}\n                        </CTableRow>\n                    </CTableHead>\n                    <CTableBody>\n                        {data.map((x, i) => (<Fragment key={i}>\n                            <CTableRow>\n                                <CTableHeaderCell scope=\"col\" className=\"text-primary text\">\n                                    {x.member}\n                                </CTableHeaderCell>\n                                <CTableDataCell>\n                                    {x.date}\n                                </CTableDataCell>\n                                {/* <CTableDataCell>\n                                    <CButton variant=\"outline\" onClick={() => onMemberNotAvailable(x.member)} color=\"danger\">\n                                        <CIcon icon={cilUserX} />\n                                    </CButton>\n                                </CTableDataCell> */}\n                            </CTableRow>\n                        </Fragment>))}\n                    </CTableBody>\n                </CTable>\n            </CCardBody>\n        </CCard>\n    </>\n}\n\nexport default WaterDays"],"names":["children","listOfMembers","useState","data","setData","setNotAvailableMembers","setAvailableDates","getUpdatedDates","dates","mili1","length","Date","getTime","temp","prevDate","i","push","moment","add","ref","doc","db","updateDoc","availableDates","updateDays","docRef","getDoc","docSnap","notAvailableRef","notAvailable","tempNotAvailable","memberNotAvailable","loop","forEach","member","includes","date","format","useEffect","className","striped","color","scope","map","x","Fragment"],"sourceRoot":""}