{"version":3,"file":"static/js/851.508e6443.chunk.js","mappings":"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","sources":["components/PageHeading.js","views/profile/Profile.js"],"sourcesContent":["const PageHeading = ({ children }) => {\r\n    return <h5>{children}</h5>\r\n}\r\n\r\nexport default PageHeading","import {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCardImage,\r\n  CCol,\r\n  CForm,\r\n  CFormInput,\r\n  CFormLabel,\r\n  CSpinner,\r\n} from '@coreui/react'\r\nimport PageHeading from 'src/components/PageHeading'\r\nimport { useEffect, useState } from 'react'\r\nimport * as ProfilesData from './ProfileData'\r\nimport { addDoc, collection, doc, getDocs, query, updateDoc, where } from \"firebase/firestore\";\r\nimport { db } from 'src/firebase/FirebaseProvider';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst Profile = () => {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"user\")))\r\n  const [userData, setUserData] = useState({ firstName: '', lastName: '', email: '', id: '' })\r\n  const [imageData, setImageData] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  const isMobileOrTablet = () => {\r\n    return /(android|iphone|ipad|mobile)/i.test(navigator.userAgent);\r\n  }\r\n\r\n  const onSave = async () => {\r\n\r\n    if (userData.id !== \"\" ) {\r\n      const userRef = doc(db, \"users\", userData.id);\r\n      await updateDoc(userRef, {\r\n        firstName : userData.firstName, \r\n        lastName : userData.lastName, \r\n        email : userData.email,\r\n        phoneNo :  user.phoneNumber,\r\n        profile : imageData\r\n       });  \r\n    } else {\r\n      await addDoc(collection(db, \"users\"), {\r\n        firstName : userData.firstName, \r\n        lastName : userData.lastName, \r\n        email : userData.email,\r\n        phoneNo :  user.phoneNumber,\r\n        profile : imageData\r\n      });\r\n    } \r\n    Swal.fire({\r\n      title: \"Success\",\r\n      text: \"Profile updated successfully!\",\r\n      icon: \"success\",\r\n      confirmButtonColor: \"#006f95\"          \r\n    }).then(() => {\r\n      window.location.reload()\r\n    })\r\n\r\n  }\r\n\r\n  const uploadImage = (e) => {\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n    reader.onload = async (e) => {\r\n      const dataUrl = e.target.result\r\n      setImageData(dataUrl)\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  const loaduser = () => {\r\n    setIsLoading(true)\r\n    const q = query(collection(db, \"users\"), where(\"phoneNo\", \"==\", user.phoneNumber));\r\n    getDocs(q).then(rs => {\r\n      rs.forEach(doc => {\r\n        const obj = {\r\n          firstName: doc.data().firstName,\r\n          lastName: doc.data().lastName,\r\n          email: doc.data().email,\r\n          id: doc.id\r\n        }\r\n        setImageData(doc.data().profile)\r\n        setUserData(obj)\r\n      })\r\n      setIsLoading(false)\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    loaduser()\r\n  }, []);\r\n\r\n  return <>\r\n    <CCard className=\"mb-4\">\r\n      <CCardHeader>\r\n        <PageHeading>\r\n          Profile\r\n        </PageHeading>\r\n      </CCardHeader>\r\n      <CCardBody>\r\n        {isLoading ?\r\n          <div className='d-flex justify-content-center'>\r\n            <CSpinner color=\"primary\" variant=\"grow\" />\r\n          </div> :\r\n          <CForm className=\"row g-3\">\r\n            <CCol md={12} className=\"d-flex justify-content-center\">\r\n            {isMobileOrTablet() ? <CCardImage\r\n              style={{ width: \"50%\" }}\r\n              src={imageData}\r\n            /> :\r\n              <CCardImage\r\n                style={{ width: \"10%\" }}\r\n                src={imageData}\r\n              />}\r\n          </CCol>\r\n          <div className='d-flex justify-content-center pb-3' style={{ borderBottom: \"1px solid grey\" }}>\r\n            <CButton className='p-0 m-0 pt-1'><CFormLabel htmlFor=\"profile\" style={{ width: \"150px\" }}>Upload</CFormLabel></CButton>\r\n            <CFormInput hidden type=\"file\" id=\"profile\" onChange={uploadImage} />\r\n          </div>\r\n\r\n            <CCol md={6}>\r\n              <CFormLabel htmlFor=\"inputFirstName\">First Name</CFormLabel>\r\n              <CFormInput defaultValue={userData.firstName} onChange={e => setUserData({ ...userData, firstName: e.target.value })} type=\"text\" id=\"inputFirstName\" />\r\n            </CCol>\r\n            <CCol md={6}>\r\n              <CFormLabel htmlFor=\"inputLastName\">Last Name</CFormLabel>\r\n              <CFormInput defaultValue={userData.lastName} onChange={e => setUserData({ ...userData, lastName: e.target.value })} type=\"text\" id=\"inputLastName\" />\r\n            </CCol>\r\n            <CCol md={6}>\r\n              <CFormLabel htmlFor=\"inputEmail\">Email Address</CFormLabel>\r\n              <CFormInput defaultValue={userData.email} onChange={e => setUserData({ ...userData, email: e.target.value })} type=\"email\" id=\"inputEmail\" />\r\n            </CCol>\r\n            <CCol md={6}>\r\n              <CFormLabel htmlFor=\"inputMobil\">Mobile Number</CFormLabel>\r\n              <CFormInput value={user?.phoneNumber.replace(\"+91\", \"\")} type=\"text\" id=\"inputMobil\" />\r\n            </CCol>\r\n            <CCol xs={12} className=\"d-flex justify-content-center\">\r\n              <CButton className='w-25' onClick={onSave}>Save</CButton>\r\n            </CCol>\r\n          </CForm>}\r\n      </CCardBody>\r\n    </CCard>\r\n  </>\r\n}\r\n\r\nexport default Profile"],"names":["children","useState","JSON","parse","localStorage","getItem","user","firstName","lastName","email","id","userData","setUserData","imageData","setImageData","isLoading","setIsLoading","onSave","userRef","doc","db","updateDoc","phoneNo","phoneNumber","profile","addDoc","collection","Swal","title","text","icon","confirmButtonColor","then","window","location","reload","useEffect","q","query","where","getDocs","rs","forEach","obj","data","loaduser","className","color","variant","md","test","navigator","userAgent","style","width","src","borderBottom","htmlFor","hidden","type","onChange","e","file","target","files","reader","FileReader","onload","dataUrl","result","readAsDataURL","defaultValue","value","replace","xs","onClick"],"sourceRoot":""}