{"version":3,"file":"static/js/936.3ae19c2f.chunk.js","mappings":"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","sources":["components/PageHeading.js","../node_modules/@coreui/icons/js/free/cil-user-x.js","views/water-days/WaterDays.js"],"sourcesContent":["const PageHeading = ({ children }) => {\r\n    return <h5>{children}</h5>\r\n}\r\n\r\nexport default PageHeading","export const cilUserX = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M216,16A112.127,112.127,0,0,0,104,128v79.68a80.239,80.239,0,0,0,9.768,38.308l27.455,50.334L68.4,343.656A79.727,79.727,0,0,0,32,410.732V496H312V464H64V410.732a47.838,47.838,0,0,1,21.84-40.246L183.5,307.007l-41.64-76.341A48.149,48.149,0,0,1,136,207.68V128a80,80,0,0,1,160,0v79.68a48.143,48.143,0,0,1-5.861,22.985L248.5,307.007,312,348.283V310.117l-21.223-13.8,27.454-50.334A80.226,80.226,0,0,0,328,207.68V128A112.127,112.127,0,0,0,216,16Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='483.314 355.314 460.686 332.686 412 381.372 363.314 332.686 340.686 355.314 389.372 404 340.686 452.686 363.314 475.314 412 426.628 460.686 475.314 483.314 452.686 434.628 404 483.314 355.314' class='ci-primary'/>\"]","import { CCard, CCardHeader, CCardBody, CCardTitle, CCardText, CRow, CCol, CTable, CTableHead, CTableRow, CTableHeaderCell, CTableBody, CTableDataCell, CButton } from '@coreui/react'\r\nimport PageHeading from '../../components/PageHeading'\r\nimport { WhatsappIcon } from 'react-share';\r\nimport { useEffect } from 'react';\r\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\r\nimport { db } from 'src/firebase/FirebaseProvider';\r\nimport { useState } from 'react';\r\nimport moment from 'moment/moment';\r\nimport CIcon from '@coreui/icons-react';\r\nimport { cilUserX } from '@coreui/icons';\r\nimport { Fragment } from 'react';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst listOfMembers = [\"Shree. Ranjit Ranchhod Kale\",\r\n    \"Shree. Vilas Vaman Talele (Sir)\",\r\n    \"Shree. Chandan Aananda Patil\",\r\n    \"Shree. Rahul Kirtikumar Jain\",\r\n    \"Shree. Abhijit Shyamkant Kulkarni\",\r\n    \"Shree. Kunal Pandit Patil\",\r\n    \"Shree. Abhiman Pralhad Surgade\"]\r\n\r\nconst WaterDays = () => {\r\n\r\n    const [data, setData] = useState([])\r\n    const [notAvailableMembers, setNotAvailableMembers] = useState([])\r\n    const [availableDates, setAvailableDates] = useState([])\r\n\r\n    const getUpdatedDates = (dates) => {\r\n        const mili1 = dates[dates.length - 1]\r\n        const mili2 = new Date().getTime()\r\n        if (mili2 > mili1) {\r\n            const temp = []\r\n            let prevDate = mili1\r\n            for (var i = 0; i < listOfMembers.length; i++) {\r\n                temp.push(\r\n                    new Date(moment(prevDate).add(3, 'd')).getTime()\r\n                )\r\n                prevDate = moment(prevDate).add(3, 'd')\r\n            }\r\n            ///// HERE update the dates array and return new array\r\n        }\r\n        return dates\r\n    }\r\n\r\n    const updateDays = async () => {\r\n\r\n        const docRef = doc(db, \"water-days\", \"elWcmZ1gatVnwiqHJIJO\");\r\n        const docSnap = await getDoc(docRef);\r\n        const dates = getUpdatedDates(docSnap.data().availableDates)\r\n        setAvailableDates(dates)\r\n\r\n        const notAvailableRef = doc(db, \"water-days\", \"5WPZ5s20pvizja89MEhE\");\r\n        const notAvailable = await getDoc(notAvailableRef);\r\n        const tempNotAvailable = notAvailable.data().memberNotAvailable\r\n        setNotAvailableMembers(tempNotAvailable)\r\n\r\n        const temp = []\r\n        let loop = 0\r\n        listOfMembers.forEach(member => {\r\n            if (!tempNotAvailable.includes(member)) {\r\n                temp.push({\r\n                    member: member,\r\n                    date: moment(dates[loop]).format(\"dddd\") + \", \" + moment(dates[loop]).format(\"DD MMM YYYY\")\r\n                })\r\n                loop++\r\n            }\r\n        })\r\n        tempNotAvailable.forEach(member => {\r\n            temp.push({\r\n                member: member,\r\n                date: moment(dates[loop]).format(\"dddd\") + \", \" + moment(dates[loop]).format(\"DD MMM YYYY\")\r\n            })\r\n            loop++\r\n        })\r\n        setData(temp)\r\n    }\r\n\r\n    const onMemberNotAvailable = async (member) => {\r\n        if (!notAvailableMembers.includes(member)) {\r\n            const temp = notAvailableMembers\r\n            temp.push(member)\r\n\r\n            const ref = doc(db, \"water-days\", \"5WPZ5s20pvizja89MEhE\");\r\n            await updateDoc(ref, {\r\n                memberNotAvailable: temp\r\n            });\r\n\r\n            Swal.fire({\r\n                title: \"Success\",\r\n                text: \"Member removed successfully!\",\r\n                icon: \"success\",\r\n                confirmButtonColor: \"#006f95\"\r\n            }).then(() => {\r\n                updateDays()\r\n            })\r\n        }\r\n    }\r\n\r\n    const onDateJump = async () => {\r\n        const dates = {}\r\n        availableDates.forEach((x,i) => {\r\n            dates[i] = x\r\n        })\r\n\r\n        const { value: fruit } = await Swal.fire({\r\n            title: 'Select field validation',\r\n            input: 'select',\r\n            inputOptions: dates,\r\n            inputPlaceholder: 'Select a fruit',\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#006f95\"\r\n          })\r\n          \r\n          if (fruit) {\r\n            Swal.fire(`You selected: ${fruit}`)\r\n          }\r\n    }\r\n\r\n    useEffect(() => {\r\n        updateDays()\r\n    }, [])\r\n\r\n    return <>\r\n        <CCard className=\"mb-4\">\r\n            <CCardHeader className='d-flex justify-content-between'>\r\n                <PageHeading>\r\n                    Water Days\r\n                </PageHeading>\r\n                {/* <CButton variant=\"outline\" onClick={onDateJump}>Date Jump</CButton> */}\r\n            </CCardHeader>\r\n            <CCardBody>\r\n                <CTable striped className='border'>\r\n                    <CTableHead color='dark'>\r\n                        <CTableRow>\r\n                            <CTableHeaderCell scope=\"col\">Member</CTableHeaderCell>\r\n                            <CTableHeaderCell scope=\"col\">Date</CTableHeaderCell>\r\n                            <CTableHeaderCell scope=\"col\">Action</CTableHeaderCell>\r\n                        </CTableRow>\r\n                    </CTableHead>\r\n                    <CTableBody>\r\n                        {data.map((x, i) => (<Fragment key={i}>\r\n                            <CTableRow>\r\n                                <CTableHeaderCell scope=\"col\" className=\"text-primary text\">\r\n                                    {x.member}\r\n                                </CTableHeaderCell>\r\n                                <CTableDataCell>\r\n                                    {x.date}\r\n                                </CTableDataCell>\r\n                                <CTableDataCell>\r\n                                    <CButton variant=\"outline\" onClick={() => onMemberNotAvailable(x.member)} color=\"danger\">\r\n                                        <CIcon icon={cilUserX} />\r\n                                    </CButton>\r\n                                </CTableDataCell>\r\n                            </CTableRow>\r\n                        </Fragment>))}\r\n                    </CTableBody>\r\n                </CTable>\r\n            </CCardBody>\r\n        </CCard>\r\n    </>\r\n}\r\n\r\nexport default WaterDays"],"names":["children","cilUserX","listOfMembers","useState","data","setData","notAvailableMembers","setNotAvailableMembers","setAvailableDates","getUpdatedDates","dates","mili1","length","Date","getTime","temp","prevDate","i","push","moment","add","updateDays","docRef","doc","db","getDoc","docSnap","availableDates","notAvailableRef","notAvailable","tempNotAvailable","memberNotAvailable","loop","forEach","member","includes","date","format","onMemberNotAvailable","ref","updateDoc","Swal","title","text","icon","confirmButtonColor","then","useEffect","className","PageHeading","striped","color","scope","map","x","Fragment","variant","onClick"],"sourceRoot":""}