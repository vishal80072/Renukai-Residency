{"version":3,"file":"static/js/198.d8070995.chunk.js","mappings":"yLAIA,IAJoB,SAAH,GAAsB,IAAhBA,EAAQ,EAARA,SACnB,OAAO,wBAAKA,GAChB,C,+KCuFA,UA7EiB,YAEIC,EAAAA,EAAAA,MAAjB,IAEA,GAAwCC,EAAAA,EAAAA,UAAS,IAAG,eAA/BC,GAAF,KAAiB,MAEpC,GAA4CD,EAAAA,EAAAA,UAAS,GAAE,eAAhCE,GAAF,KAAmB,MACxC,GAAkCF,EAAAA,EAAAA,WAAS,GAAM,eAA1CG,EAAS,KAAEC,EAAY,KAiC9B,OAJAC,EAAAA,EAAAA,YAAU,YA3BO,WAEbD,GAAa,GACb,IAAME,GAAIC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,iBAAiBC,EAAAA,EAAAA,IAAQ,OAAQ,UAEhEC,EAAAA,EAAAA,IAAQL,GAAGM,MAAK,SAAAC,GACZ,IAAMC,EAAW,GACbC,EAAU,EACdF,EAAGG,SAAQ,SAAAC,GACiB,QAApBA,EAAIC,OAAOC,KACe,aAAtBF,EAAIC,OAAOE,SACXL,GAAWM,SAASJ,EAAIC,OAAOI,SAIT,aAAtBL,EAAIC,OAAOE,SACXL,GAAWM,SAASJ,EAAIC,OAAOI,SAGvCR,EAASS,MAAK,QAAEC,GAAIP,EAAIO,GAAIC,aAAcC,IAAOT,EAAIC,OAAOS,MAAMC,OAAO,gBAAmBX,EAAIC,QACpG,IACAhB,EAAkBa,GAClBd,EAAgBa,GAChBV,GAAa,EACjB,GACJ,CAGIyB,EACJ,GAAG,KAEI,+BACH,UAAC,IAAc,CAACC,OAAQ3B,EACpB4B,SAAO,EACPC,KAAK,iBAAgB,WACrB,SAAC,KAAI,WACD,UAAC,KAAK,YACF,SAAC,KAAW,CAACC,UAAU,iCAAgC,UACnD,SAAC,IAAW,UAAC,6BAKjB,UAAC,KAAS,YACN,SAAC,KAAO,CAACC,QAAQ,UAAUD,UAAU,aAAY,SAAC,gBAClD,SAAC,KAAO,CAACC,QAAQ,UAAUD,UAAU,aAAY,SAAC,gBAClD,SAAC,KAAO,CAACC,QAAQ,UAAUD,UAAU,aAAY,SAAC,eAClD,SAAC,KAAO,CAACC,QAAQ,UAAUD,UAAU,aAAY,SAAC,uBAI9D,SAAC,KAAI,CAACA,UAAU,OAAM,UAClB,UAAC,KAAK,YACF,SAAC,KAAW,CAACA,UAAU,iCAAgC,UACnD,SAAC,IAAW,UAAC,2BAKjB,SAAC,KAAS,WACN,SAAC,KAAO,CAACC,QAAQ,UAAUD,UAAU,aAAY,SAAC,mCAM1E,C","sources":["components/PageHeading.js","views/download/Download.js"],"sourcesContent":["const PageHeading = ({ children }) => {\r\n    return <h5>{children}</h5>\r\n}\r\n\r\nexport default PageHeading","\r\nimport { CCard, CCardHeader, CCardBody, CCol, CButton } from '@coreui/react'\r\nimport { collection, getDocs, query, orderBy } from 'firebase/firestore'\r\nimport 'react-super-responsive-table/dist/SuperResponsiveTableStyle.css';\r\nimport { useEffect, useState } from 'react';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\nimport { db } from 'src/firebase/FirebaseProvider'\r\nimport moment from 'moment';\r\nimport PageHeading from 'src/components/PageHeading';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst Download = () => {\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const [Transactions, setTransactions] = useState([])\r\n\r\n    const [currentBalance, setCurrentBalance] = useState(0)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const loadData = () => {\r\n\r\n        setIsLoading(true)\r\n        const q = query(collection(db, \"transactions\"), orderBy(\"date\", \"desc\"));\r\n\r\n        getDocs(q).then(rs => {\r\n            const tempMain = []\r\n            let balance = 0\r\n            rs.forEach(doc => {\r\n                if (doc.data().type === 'add') {\r\n                    if (doc.data().status === 'approved') {\r\n                        balance += parseInt(doc.data().amount)\r\n                    }\r\n\r\n                } else {\r\n                    if (doc.data().status === 'approved') {\r\n                        balance -= parseInt(doc.data().amount)\r\n                    }\r\n                }\r\n                tempMain.push({ id: doc.id, dateAsString: moment(doc.data().date).format(\"DD MMM YYYY\"), ...doc.data() })\r\n            })\r\n            setCurrentBalance(balance)\r\n            setTransactions(tempMain)\r\n            setIsLoading(false)\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadData()\r\n    }, [])\r\n\r\n    return <>\r\n        <LoadingOverlay active={isLoading}\r\n            spinner\r\n            text='Please wait...'>\r\n            <CCol>\r\n                <CCard>\r\n                    <CCardHeader className='d-flex justify-content-between'>\r\n                        <PageHeading>\r\n                            Download Transactions\r\n                        </PageHeading>\r\n                        {/* <CButton variant=\"outline\" onClick={onDateJump}>Date Jump</CButton> */}\r\n                    </CCardHeader>\r\n                    <CCardBody>\r\n                        <CButton variant='outline' className='w-100 mb-1'>This Month</CButton>\r\n                        <CButton variant='outline' className='w-100 mb-1'>Last Month</CButton>\r\n                        <CButton variant='outline' className='w-100 mb-1'>This Year</CButton>\r\n                        <CButton variant='outline' className='w-100 mb-1'>Last Year</CButton>\r\n                    </CCardBody>\r\n                </CCard>\r\n            </CCol>\r\n            <CCol className='mt-3'>\r\n                <CCard>\r\n                    <CCardHeader className='d-flex justify-content-between'>\r\n                        <PageHeading>\r\n                            Download Water Days\r\n                        </PageHeading>\r\n                        {/* <CButton variant=\"outline\" onClick={onDateJump}>Date Jump</CButton> */}\r\n                    </CCardHeader>\r\n                    <CCardBody>\r\n                        <CButton variant='outline' className='w-100 mb-1'>Download Water Days</CButton>\r\n                    </CCardBody>\r\n                </CCard>\r\n            </CCol >\r\n        </LoadingOverlay>\r\n    </>\r\n}\r\n\r\nexport default Download"],"names":["children","useNavigate","useState","setTransactions","setCurrentBalance","isLoading","setIsLoading","useEffect","q","query","collection","db","orderBy","getDocs","then","rs","tempMain","balance","forEach","doc","data","type","status","parseInt","amount","push","id","dateAsString","moment","date","format","loadData","active","spinner","text","className","variant"],"sourceRoot":""}