{"version":3,"file":"static/js/851.d83aa6d8.chunk.js","mappings":"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","sources":["components/PageHeading.js","views/profile/Profile.js"],"sourcesContent":["const PageHeading = ({ children }) => {\r\n    return <h5>{children}</h5>\r\n}\r\n\r\nexport default PageHeading","import {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCardImage,\r\n  CCol,\r\n  CForm,\r\n  CFormInput,\r\n  CFormLabel,\r\n  CSpinner,\r\n} from '@coreui/react'\r\nimport PageHeading from 'src/components/PageHeading'\r\nimport { useEffect, useState } from 'react'\r\nimport * as ProfilesData from './ProfileData'\r\nimport { addDoc, collection, doc, getDocs, query, updateDoc, where } from \"firebase/firestore\";\r\nimport { db } from 'src/firebase/FirebaseProvider';\r\nimport Swal from 'sweetalert2';\r\nimport LoadingOverlay from 'react-loading-overlay';\r\n\r\nconst Profile = () => {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"user\")))\r\n  const [userData, setUserData] = useState({ firstName: '', lastName: '', email: '', id: '' })\r\n  const [imageData, setImageData] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isOverlayLoading, setIsOverlayLoading] = useState(false)\r\n\r\n  const isMobileOrTablet = () => {\r\n    return /(android|iphone|ipad|mobile)/i.test(navigator.userAgent);\r\n  }\r\n\r\n  const onSave = async () => {\r\n    setIsOverlayLoading(true)\r\n    try {\r\n      if (userData.id !== \"\") {\r\n        const userRef = doc(db, \"users\", userData.id);\r\n        await updateDoc(userRef, {\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          email: userData.email,\r\n          phoneNo: user.phoneNumber,\r\n          profile: imageData\r\n        });\r\n      } else {\r\n        await addDoc(collection(db, \"users\"), {\r\n          firstName: userData.firstName,\r\n          lastName: userData.lastName,\r\n          email: userData.email,\r\n          phoneNo: user.phoneNumber,\r\n          profile: imageData\r\n        });\r\n      }\r\n      setIsOverlayLoading(false)\r\n      Swal.fire({\r\n        title: \"Success\",\r\n        text: \"Profile updated successfully!\",\r\n        icon: \"success\",\r\n        confirmButtonColor: \"#006f95\"\r\n      }).then(() => {\r\n        window.location.reload()\r\n      })\r\n    } catch (e) {\r\n      setIsOverlayLoading(false)\r\n      Swal.fire({\r\n        title: \"Failed\",\r\n        text: \"Failed to update profile try again!\",\r\n        icon: \"error\",\r\n        confirmButtonColor: \"#006f95\"\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const uploadImage = (e) => {\r\n    const file = e.target.files[0]\r\n    const reader = new FileReader()\r\n    reader.onload = async (e) => {\r\n      const dataUrl = e.target.result\r\n      setImageData(dataUrl)\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  const loaduser = () => {\r\n    setIsLoading(true)\r\n    const q = query(collection(db, \"users\"), where(\"phoneNo\", \"==\", user.phoneNumber));\r\n    getDocs(q).then(rs => {\r\n      rs.forEach(doc => {\r\n        const obj = {\r\n          firstName: doc.data().firstName,\r\n          lastName: doc.data().lastName,\r\n          email: doc.data().email,\r\n          id: doc.id\r\n        }\r\n        setImageData(doc.data().profile)\r\n        setUserData(obj)\r\n      })\r\n      setIsLoading(false)\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    loaduser()\r\n  }, []);\r\n\r\n  return <>\r\n    <LoadingOverlay\r\n      active={isOverlayLoading}\r\n      spinner\r\n      text='Please wait...'\r\n    >\r\n      <CCard className=\"mb-4\">\r\n        <CCardHeader>\r\n          <PageHeading>\r\n            Profile\r\n          </PageHeading>\r\n        </CCardHeader>\r\n        <CCardBody>\r\n          {isLoading ?\r\n            <div className='d-flex justify-content-center'>\r\n              <CSpinner color=\"primary\" variant=\"grow\" />\r\n            </div> :\r\n            <CForm className=\"row g-3\">\r\n              <CCol md={12} className=\"d-flex justify-content-center\">\r\n                {isMobileOrTablet() ? <CCardImage\r\n                  style={{ width: \"50%\" }}\r\n                  src={imageData}\r\n                /> :\r\n                  <CCardImage\r\n                    style={{ width: \"10%\" }}\r\n                    src={imageData}\r\n                  />}\r\n              </CCol>\r\n              <div className='d-flex justify-content-center pb-3' style={{ borderBottom: \"1px solid grey\" }}>\r\n                <CButton className='p-0 m-0 pt-1'><CFormLabel htmlFor=\"profile\" style={{ width: \"150px\" }}>Upload</CFormLabel></CButton>\r\n                <CFormInput hidden type=\"file\" id=\"profile\" onChange={uploadImage} />\r\n              </div>\r\n\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"inputFirstName\">First Name</CFormLabel>\r\n                <CFormInput defaultValue={userData.firstName} onChange={e => setUserData({ ...userData, firstName: e.target.value })} type=\"text\" id=\"inputFirstName\" />\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"inputLastName\">Last Name</CFormLabel>\r\n                <CFormInput defaultValue={userData.lastName} onChange={e => setUserData({ ...userData, lastName: e.target.value })} type=\"text\" id=\"inputLastName\" />\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"inputEmail\">Email Address</CFormLabel>\r\n                <CFormInput defaultValue={userData.email} onChange={e => setUserData({ ...userData, email: e.target.value })} type=\"email\" id=\"inputEmail\" />\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"inputMobil\">Mobile Number</CFormLabel>\r\n                <CFormInput value={user?.phoneNumber.replace(\"+91\", \"\")} type=\"text\" id=\"inputMobil\" />\r\n              </CCol>\r\n              <CCol xs={12} className=\"d-flex justify-content-center\">\r\n                <CButton className='w-25' onClick={onSave}>Save</CButton>\r\n              </CCol>\r\n            </CForm>}\r\n        </CCardBody>\r\n      </CCard>\r\n    </LoadingOverlay>\r\n  </>\r\n}\r\n\r\nexport default Profile"],"names":["children","useState","JSON","parse","localStorage","getItem","user","firstName","lastName","email","id","userData","setUserData","imageData","setImageData","isLoading","setIsLoading","isOverlayLoading","setIsOverlayLoading","onSave","userRef","doc","db","updateDoc","phoneNo","phoneNumber","profile","addDoc","collection","Swal","title","text","icon","confirmButtonColor","then","window","location","reload","useEffect","q","query","where","getDocs","rs","forEach","obj","data","loaduser","active","spinner","className","color","variant","md","test","navigator","userAgent","style","width","src","borderBottom","htmlFor","hidden","type","onChange","e","file","target","files","reader","FileReader","onload","dataUrl","result","readAsDataURL","defaultValue","value","replace","xs","onClick"],"sourceRoot":""}